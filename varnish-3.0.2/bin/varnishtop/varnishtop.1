.\" Man page generated from reStructeredText.
.
.TH VARNISHTOP 1 "2010-05-31" "1.0" ""
.SH NAME
varnishtop \- Varnish log entry ranking
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
varnishtop [\-1] [\-b] [\-C] [\-c] [\-d] [\-f] [\-I regex]
[\-i tag] [\-n varnish_name] [\-r file] [\-V] [\-X regex]
[\-x tag]
.SH DESCRIPTION
.sp
The varnishtop utility reads \fBvarnishd(1)\fP shared memory logs and
presents a continuously updated list of the most commonly occurring
log entries.  With suitable filtering using the \fB\-I\fP, \fB\-i\fP, \fB\-X\fP
and \fB\-x\fP options, it can be used to display a ranking of requested
documents, clients, user agents, or any other information which is
recorded in the log.
.sp
The following options are available:
.INDENT 0.0
.TP
.B \-1
.
Instead of presenting of a continuously updated display,
print the statistics once and exit. Implies \fB\-d\fP.
.TP
.B \-b
.
Include log entries which result from communication
with a backend server.  If neither \fB\-b\fP nor \fB\-c\fP is
specified, varnishtop acts as if they both were.
.TP
.B \-C
.
Ignore case when matching regular expressions.
.TP
.B \-c
.
Include log entries which result from communication
with a client.  If neither \fB\-b\fP nor \fB\-c\fP is specified,
varnishtop acts as if they both were.
.TP
.B \-d
.
Process old log entries on startup.  Normally, varnishtop
will only process entries which are written to the log
after it starts.
.TP
.B \-f
.
Sort and group only on the first field of each log entry.
This is useful when displaying e.g. stataddr entries,
where the first field is the client IP address.
.TP
.BI \-I \ regex
.
Include log entries which match the specified regular
expression.  If neither \fB\-I\fP nor \fB\-i\fP is specified, all log
entries are included.
.TP
.BI \-i \ tag
.
Include log entries with the specified tag.  If neither \fB\-I\fP
nor \fB\-i\fP is specified, all log entries are included.
.TP
.BI \-p \ period
.
Specifies the number of seconds to measure over, the default
is 60 seconds. The first number in the list is the average
number of requests seen over this time period.
.TP
.B \-n
.
Specifies the name of the varnishd instance to get logs from.
If \fB\-n\fP is not specified, the host name is used.
.TP
.BI \-r \ file
.
Read log entries from file instead of shared memory.
.TP
.B \-V
.
Display the version number and exit.
.TP
.BI \-X \ regex
.
Exclude log entries which match the specified regular expression.
.TP
.BI \-x \ tag
.
Exclude log entries with the specified tag.
.UNINDENT
.SH EXAMPLES
.sp
The following example displays a continuously updated list of the most
frequently requested URLs::
.sp
.nf
.ft C
varnishtop \-i RxURL
.ft P
.fi
.sp
The following example displays a continuously updated list of the most
commonly used user agents::
.sp
.nf
.ft C
varnishtop \-i RxHeader \-C \-I ^User\-Agent
.ft P
.fi
.SH SEE ALSO
.INDENT 0.0
.IP \(bu 2
.
varnishd(1)
.IP \(bu 2
.
varnishhist(1)
.IP \(bu 2
.
varnishlog(1)
.IP \(bu 2
.
varnishncsa(1)
.IP \(bu 2
.
varnishstat(1)
.UNINDENT
.SH HISTORY
.sp
The varnishtop utility was originally developed by Poul\-Henning Kamp
in cooperation with Verdens Gang AS and Varnish Software AS, and later
substantially rewritten by Dag\-Erling Smørgrav.  This manual page was
written by Dag\-Erling Smørgrav.
.SH COPYRIGHT
.sp
This document is licensed under the same licence as Varnish
itself. See LICENCE for details.
.INDENT 0.0
.IP \(bu 2
.
Copyright (c) 2006 Verdens Gang AS
.IP \(bu 2
.
Copyright (c) 2006\-2011 Varnish Software AS
.UNINDENT
.SH AUTHOR
Dag-Erling Smørgrav
.\" Generated by docutils manpage writer.
.\" 
.
