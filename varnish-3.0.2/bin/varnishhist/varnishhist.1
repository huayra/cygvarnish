.\" Man page generated from reStructeredText.
.
.TH VARNISHHIST 1 "2010-05-31" "1.0" ""
.SH NAME
varnishhist \- Varnish request histogram
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
varnishhist [\-b] [\-C] [\-c] [\-d] [\-I regex] [\-i tag] [\-m \fI\%tag:regex\fP ...]
[\-n varnish_name] [\-r file] [\-V] [\-w delay] [\-X regex] [\-x tag]
.SH DESCRIPTION
.sp
The varnishhist utility reads varnishd(1) shared memory logs and
presents a continuously updated histogram show‐ ing the distribution
of the last N requests by their processing.  The value of N and the
vertical scale are dis‐ played in the top left corner.  The horizontal
scale is logarithmic.  Hits are marked with a pipe character ("|"),
and misses are marked with a hash character ("#").
.sp
The following options are available:
.INDENT 0.0
.TP
.B \-b
.
Include log entries which result from communication with
a backend server.  If neither \-b nor \-c is
specified, varnishhist acts as if they both were.
.TP
.B \-C
.
Ignore case when matching regular expressions.
.TP
.B \-c
.
Include log entries which result from communication with
a client.  If neither \-b nor \-c is specified,
varnishhist acts as if they both were.
.TP
.B \-d
.
Process old log entries on startup.  Normally, varnishhist
will only process entries which are written to the
log after it starts.
.TP
.BI \-I \ regex
.
Include log entries which match the specified
regular expression.  If neither \-I nor \-i is specified,
all log entries are included.
.TP
.BI \-i \ tag
.
Include log entries with the specified tag.  If neither
\-I nor \-i is specified, all log entries are included.
.UNINDENT
.INDENT 0.0
.TP
.B \-m \fI\%tag:regex\fP only count transactions where tag matches regex. Multiple
.sp
\-m options are AND\-ed together.
.UNINDENT
.INDENT 0.0
.TP
.B \-n
.
Specifies the name of the varnishd instance to get logs
from.  If \-n is not specified, the host name is used.
.TP
.BI \-r \ file
.
Read log entries from file instead of shared memory.
.TP
.B \-V
.
Display the version number and exit.
.TP
.BI \-w \ delay
.
Wait at least delay seconds between each update.  The
default is 1.  file instead of displaying them.  The file
will be overwritten unless the \-a option was specified.
.TP
.BI \-X \ regex
.
Exclude log entries which match the specified regular expression.
.TP
.BI \-x \ tag
.
Exclude log entries with the specified tag.
.UNINDENT
.SH SEE ALSO
.INDENT 0.0
.IP \(bu 2
.
varnishd(1)
.IP \(bu 2
.
varnishlog(1)
.IP \(bu 2
.
varnishncsa(1)
.IP \(bu 2
.
varnishstat(1)
.IP \(bu 2
.
varnishtop(1)
.UNINDENT
.SH HISTORY
.sp
The varnishhist utility was developed by Poul\-Henning Kamp in cooperation with Verdens Gang
AS and Varnish Software AS.  This manual page was written by Dag\-Erling Smørgrav.
.SH COPYRIGHT
.sp
This document is licensed under the same licence as Varnish
itself. See LICENCE for details.
.INDENT 0.0
.IP \(bu 2
.
Copyright (c) 2006 Verdens Gang AS
.IP \(bu 2
.
Copyright (c) 2006\-2011 Varnish Software AS
.UNINDENT
.SH AUTHOR
Dag-Erling Smørgrav
.\" Generated by docutils manpage writer.
.\" 
.
